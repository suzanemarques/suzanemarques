<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        html {

            font-family: Arial, Helvetica, sans-serif;
        }

        body {
            padding: 40px;
        }

        table {
            border: solid 1px black;
            border-collapse: collapse;
            border-spacing: 0;
            width:100%;
    

        }

        th,
        td {
            border: solid 1px black;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div>
        <h1>AGENDA 2021</h1> 
        <form>
            <br>
    </div>
    <div style="width:40%"> 
        <div class="form-group">
            <label for="nome">Nome:</label>
            <input class="form-control" type="text" nome="Nome"  id="nome" 
            data-is-module="charCounter" name="Nome" placeholder="Digite Nome e Sobrenome"><br>
         </div>
        <div class="form-group">
            <label for="nome">Idade:</label>
            <input class="form-control" type="number" nome="Nome" id="idade" 
            data-is-module="charCounter" min="1" max="120" name="quantity" placeholder="Digite sua Idade" required><br>
        </div>
        <div class="form-group">
            <label for="nome">Telefone:</label>
            <input class="form-control" type="text" nome="Nome" id="telefone"
            data-is-module="charCounter" maxlength="15" name="telefone" placeholder="(00) 00000 000" required><br>
             </div>
        <div class="form-group">
            <label for="nome">Endereço:</label>
            <input class="form-control" type="text" nome="Nome" id="endereco" 
            data-is-module="charCounter" minlength="10" maxlength="120" name="Endereco" placeholder="Digite o seu Endereço" required><br>
        </div>
        <div class="form-group">
            <label for="nome">Bairro:</label>
            <input class="form-control"type="text" nome="Nome" id="bairro"
            data-is-module="charCounter" minlength="10" maxlength="40" name="Bairro" placeholder="Digite o seu Bairro"  required><br>
        </div>
        <div class="form-group">
            <label for="nome">Cidade:</label>
            <input class="form-control"type="text" nome="Nome" id="cidade" 
            required data-is-module="charCounter" minlength="10" maxlength="40" name="Cidade"
             placeholder="Digite o nome da Cidade" required><br>
            
        </div>
    </form>
    <br>
    <div class="row">
        <div class="col-md-2">
            <button type="button" class="btn btn-success" onmouseout="removeClass(this)" 
            onmouseover="mudarClasseBotao(this)" onclick="salvar()">Salvar</button>
            <br>
        </div>
    </div>
    <br>
    
    <table id= "dados" >
        <head>
        <tr>
            <th>Nome</th>
            <th>Idade</th>
            <th>Telefone</th>
            <th>Endereço</th>
            <th>Bairro</th>
            <th>Cidade</th>
        </tr>
        </head>
    </table>
    <script>
    
        

        function removeClass(element){
            element.classList.remove("btn-danger");
        }

        function mudarClasseBotao(element){
            element.classList.add("btn-danger");
        }

        function createDOMElement(str) {
            let temp = document.createElement('template');
            temp.innerHTML = str.trim();
            return temp;
        }
    
        function salvar(nome, idade, telefone, endereco, bairro, cidade){
            try{

                var linhaNova = createDOMElement(`
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                `);

                setDadosCellValue("nome", linhaNova);
                setDadosCellValue("idade", linhaNova);
                setDadosCellValue("telefone", linhaNova);
                setDadosCellValue("endereco", linhaNova);
                setDadosCellValue("bairro", linhaNova);
                setDadosCellValue("cidade", linhaNova);

                let content = document.getElementById("dados").innerHTML;

                document.getElementById("dados").innerHTML = content + linhaNova.innerHTML;

                

                limparCampos();

            }
            catch(error){
                alert(error);
            }
        }

        function limparCampos(){
            document.getElementById('nome').value = '';
            document.getElementById('idade').value = '';
            document.getElementById('telefone').value = '';
            document.getElementById('endereco').value = '';
            document.getElementById('bairro').value = '';
            document.getElementById('cidade').value = '';
        }
        
        const validacoes = {
            nome: validaNome, 
        
        };

        // () => console.log('teste'); // função lambda.

        function validaNome(value){
            if(value == '')
                return "O campo nome é obrigatório";

            if(value.length < 5 || value.length > 60)
                return "O campo nome precisa ter de 5 a 60 caractéres.";

        
        
             
        }

        
         


        function setDadosCellValue(name, linhaNova){

            var error = validacoes[name] && validacoes[name](getFieldValue(name));
            
            if(error){
                throw Error(error);
            }

            var campos = ["nome", "idade", "telefone", "endereco", "bairro", "cidade"];

            var cellIndex = campos.indexOf(name);

            setCellValue(linhaNova, cellIndex, getFieldValue(name));
        }

        function getFieldValue(name){
            return document.getElementById(name).value;
        }

        function setCellValue(linhaNova, cellIndex, value){
            linhaNova.content.firstChild.getElementsByTagName('td')[cellIndex].innerText = value;


        }   
        /*
            validação
            a aparencia dos campos

                nome: min: 5, max 60, required
                idade: min 0, max 120, required
                telefone: formato 00 00000-0000
                endereço: max characteres 120, required
                bairro: max characteres 40, required
                cidade: max characteres 40, required
        */

    </script>
    
</body>

</html>