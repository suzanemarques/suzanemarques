<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        html {

            font-family: Arial, Helvetica, sans-serif;
        }

        body {
            padding: 40px;
        }

        table {
            border: solid 1px black;
            border-collapse: collapse;
            border-spacing: 0;
            width:100%;
    

        }

        th,
        td {
            border: solid 1px black;
            padding: 10px;
        }
    </style>
</head>

<body>

    
    <div>
        <h1>AGENDA 2021</h1> 
        <form>
            <br>
    </div>
    <div style="width:40%"> 
        <div class="form-group">
            <label for="nome">Nome:</label>
            <input class="form-control" type="text" nome="Nome"  id="nome" required><br>
         </div>
        <div class="form-group">
            <label for="nome">Idade:</label>
            <input class="form-control" type="number" nome="Nome" id="idade" required><br>
        </div>
        <div class="form-group">
            <label for="nome">Telefone:</label>
            <input class="form-control" type="number" nome="Nome" id="telefone" required><br>
             </div>
        <div class="form-group">
            <label for="nome">Endereço:</label>
            <input class="form-control" type="text" nome="Nome" id="endereco" required><br>
        </div>
        <div class="form-group">
            <label for="nome">Bairro:</label>
            <input class="form-control" type="text" nome="Nome" id="bairro" required><br>
        </div>
        <div class="form-group">
            <label for="nome">Cidade:</label>
            <input class="form-control" type="text" nome="Nome" id="cidade" required><br>
        </div>
    </form>
    <br>
    <div class="row">
        <div class="col-md-2">
            <button type="button"  class="btn btn-success" onclick="salvar()">Salvar</button>
            <br>
        </div>
    </div>
    <br>
    <table id="dados" >
        <tr>
            <th>Nome</th>
            <th>Idade</th>
            <th>Telefone</th>
            <th>Endereço</th>
            <th>Bairro</th>
            <th>Cidade</th>
        </tr>
    </table>
    <script>

        function createDOMElement(str) {
            let temp = document.createElement('template');
            temp.innerHTML = str.trim();
            return temp;
        }
    
        function salvar(){
            try{

                var linhaNova = createDOMElement(`
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                `);

                setDadosCellValue("nome", true, linhaNova);
                setDadosCellValue("idade", true, linhaNova);
                setDadosCellValue("telefone", true, linhaNova);
                setDadosCellValue("endereco", true, linhaNova);
                setDadosCellValue("bairro", true, linhaNova);
                setDadosCellValue("cidade", true, linhaNova);

                let content = document.getElementById('dados').innerHTML;

                document.getElementById('dados').innerHTML = content + linhaNova.innerHTML;

                limparCampos();

            }
            catch(error){
                alert(error);
            }
        }

        function limparCampos(){
            document.getElementById('nome').value = '';
            document.getElementById('idade').value = '';
            document.getElementById('telefone').value = '';
            document.getElementById('endereco').value = '';
            document.getElementById('bairro').value = '';
            document.getElementById('cidade').value = '';
        }


        function setDadosCellValue(name, required, linhaNova){
            if(required && getFieldValue(name) == ""){
                let message = name + " field is required.";
                throw Error(message);
            }

            var campos = ["nome", "idade", "telefone", "endereco", "bairro", "cidade"];

            var cellIndex = campos.indexOf(name);

            setCellValue(linhaNova, cellIndex, getFieldValue(name));
        }

        function getFieldValue(name){
            return document.getElementById(name).value;
        }

        function setCellValue(linhaNova, cellIndex, value){
            linhaNova.content.firstChild.getElementsByTagName('td')[cellIndex].innerText = value;
        }

        /*
                nome: min: 5, max 60, required
                idade: min 0, max 120, required
                telefone: formato 00 00000-0000
                endereço: max characteres 120, required
                bairro: max characteres 40, required
                cidade: max characteres 40, required
        */

    </script>
    
</body>

</html>